#!/bin/bash

copyfrom="$1"
copyto="$2"

usage()
{
    cat <<EOF

Usage:
  ${0##*/} <copy-from-path> <copy-to-path>

EOF
    exit 1
}

[ "$#" -eq 2 ] || {
    usage
}

[ -d "$copyfrom" ] || {
    echo "Directory '$copyfrom' does not exist"
    usage
}

[ -d "$copyto" ] && {
    echo "Directory '$copyto' already exists"
    usage
}

[ -d "$(dirname "$copyto")" ] || {
    echo "Parent directory of '$copyto' does not exist"
    usage
}

cp -a "$copyfrom" "$copyto"
